---
title: "MediatR trong .NET: HÆ°á»›ng Dáº«n Tá»« A Ä‘áº¿n Z Vá»›i VÃ­ Dá»¥ Thá»±c Táº¿ vÃ  Kiáº¿n TrÃºc Sáº¡ch"
date: "2025-05-27"
description: "KhÃ¡m phÃ¡ cÃ¡ch sá»­ dá»¥ng MediatR trong .NET Ä‘á»ƒ triá»ƒn khai Mediator Pattern, giáº£m phá»¥ thuá»™c giá»¯a cÃ¡c lá»›p, cáº£i thiá»‡n kiáº¿n trÃºc vÃ  dá»… báº£o trÃ¬ mÃ£ nguá»“n. HÆ°á»›ng dáº«n kÃ¨m vÃ­ dá»¥ thá»±c táº¿ vÃ  tips tá»‘i Æ°u."
tags: ["dotnet", "mediatr" , "cqrs", "dependencyinjection", "cleanarchitecture"]
author: "Steve Bang"
readingTime: "20 min read"
image: "/images/mediatr-trong-dot-net-huong-dan-tu-a-den-z-voi-vi-du-thuc-te-va-kien-truc-sach.png"
---
# Äáº·t váº¥n Ä‘á»
Trong quÃ¡ khá»©, cÃ¡c á»©ng dá»¥ng .NET â€“ dÃ¹ nhá» hay lá»›n â€“ thÆ°á»ng phÃ¡t triá»ƒn theo cÃ¡ch Controller gá»i trá»±c tiáº¿p vÃ o Service, rá»“i Ä‘áº¿n Repository. CÃ¡ch lÃ m nÃ y Ä‘Æ¡n giáº£n nhÆ°ng mau chÃ³ng trá»Ÿ nÃªn há»—n loáº¡n khi á»©ng dá»¥ng má»Ÿ rá»™ng. Controller trá»Ÿ nÃªn â€œbÃ©o phÃ¬â€, nhiá»u lá»›p phá»¥ thuá»™c nhau nhÆ° má»™t máº¡ng nhá»‡n logic khÃ³ gá»¡ rá»‘i vÃ  khÃ³ test.

ChÃºng ta tá»«ng nghÄ© ráº±ng chia nhá» thÃ nh cÃ¡c service lÃ  Ä‘Ã£ â€œkiáº¿n trÃºc tá»‘tâ€. NhÆ°ng:

- LÃ m sao Ä‘á»ƒ tÃ¡ch biá»‡t logic Ä‘á»c vÃ  ghi?
- LÃ m sao Ä‘á»ƒ xá»­ lÃ½ cÃ¡c luá»“ng nghiá»‡p vá»¥ phá»©c táº¡p nhÆ° gá»­i email, gá»­i log, táº¡o thÃ´ng bÃ¡o... mÃ  khÃ´ng phÃ¡ vá»¡ Single Responsibility?
- LÃ m sao Ä‘á»ƒ kiá»ƒm thá»­ mÃ  khÃ´ng cáº§n giáº£ láº­p cáº£ dÃ n Service?

CÃ¢u tráº£ lá»i Ä‘áº¿n tá»« má»™t mÃ´ hÃ¬nh thiáº¿t káº¿ cÅ© nhÆ°ng Ä‘Æ°á»£c há»“i sinh máº¡nh máº½: Mediator Pattern â€“ vÃ  trong .NET, chÃºng ta cÃ³ MediatR.

**Mediator Pattern** (Máº«u thiáº¿t káº¿ Trung gian) ra Ä‘á»i nhÆ° má»™t giáº£i phÃ¡p Ä‘á»ƒ giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c Ä‘á»‘i tÆ°á»£ng, giÃºp mÃ£ nguá»“n sáº¡ch hÆ¡n, dá»… báº£o trÃ¬ hÆ¡n.

Trong .NET, thÆ° viá»‡n **MediatR** lÃ  má»™t hiá»‡n thá»±c phá»• biáº¿n vÃ  máº¡nh máº½ cá»§a máº«u thiáº¿t káº¿ nÃ y. HÃ£y cÃ¹ng khÃ¡m phÃ¡!

# Mediator Pattern lÃ  gÃ¬?

Mediator lÃ  máº«u thiáº¿t káº¿ thuá»™c nhÃ³m **Behavioral Pattern**, Ä‘Ã³ng vai trÃ² nhÆ° "ngÆ°á»i trung gian" giÃºp cÃ¡c Ä‘á»‘i tÆ°á»£ng trong há»‡ thá»‘ng giao tiáº¿p vá»›i nhau mÃ  khÃ´ng cáº§n biáº¿t rÃµ vá» nhau.

Thay vÃ¬ `Class A` gá»i trá»±c tiáº¿p Ä‘áº¿n `Class B`, `Class A` sáº½ gá»­i má»™t thÃ´ng Ä‘iá»‡p (message/request) Ä‘áº¿n `Mediator`, sau Ä‘Ã³ `Mediator` sáº½ chuyá»ƒn tiáº¿p Ä‘áº¿n Handler tÆ°Æ¡ng á»©ng Ä‘á»ƒ xá»­ lÃ½ trong há»‡ thá»‘ng vÃ  chá»‰ cáº§n tráº£ káº¿t quáº£ lÃ  xong.

# MediatR â€“ Triá»ƒn khai Mediator trong .NET

## CÃ i Ä‘áº·t
CÃ³ thá»ƒ cÃ i MediatR dá»… dÃ ng thÃ´ng qua NuGet:
```
dotnet add package MediatR.Extensions.Microsoft.DependencyInjection
```

ÄÄƒng kÃ½ MediatR trong Program.cs
```
builder.Services.AddMediatR(cfg => 
    cfg.RegisterServicesFromAssembly(typeof(Program).Assembly));
```

## Cáº¥u trÃºc cÆ¡ báº£n cá»§a MediatR
Giáº£ sá»­ báº¡n cÃ³ má»™t tÃ­nh nÄƒng Ä‘Æ¡n giáº£n: Láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng theo ID.
### 1. Request (Query)
``` 
public record GetUserByIdQuery(Guid Id) : IRequest<UserDto>;
```

### 2. Handler 
```
public class GetUserByIdHandler : IRequestHandler<GetUserByIdQuery, UserDto>
{
    private readonly IUserRepository _userRepo;

    public GetUserByIdHandler(IUserRepository userRepo)
    {
        _userRepo = userRepo;
    }

    public async Task<UserDto> Handle(GetUserByIdQuery request, CancellationToken cancellationToken)
    {
        var user = await _userRepo.GetByIdAsync(request.Id);
        return new UserDto(user.Id, user.Name);
    }
}
```

### 3. Gá»i trong Controller
```

[ApiController]
[Route("api/users")]
public class UsersController : ControllerBase
{
    private readonly IMediator _mediator;

    public UsersController(IMediator mediator)
    {
        _mediator = mediator;
    }

    [HttpGet("{id}")]
    public async Task<IActionResult> GetById(int id)
    {
        var user = await _mediator.Send(new GetUserByIdQuery(id));
        return Ok(user);
    }
}

```

# MediatR vÃ  Clean Architecture - Cáº·p Ä‘Ã´i hoÃ n háº£o trong kiáº¿n trÃºc .NET

## Clean Architecture lÃ  gÃ¬?
Clean Architecture lÃ  má»™t kiáº¿n trÃºc pháº§n má»m do Robert C. Martin (Uncle Bob) Ä‘á» xuáº¥t. Má»¥c tiÃªu cá»§a nÃ³ lÃ :

- TÃ¡ch biá»‡t rÃµ rÃ ng cÃ¡c táº§ng: Domain (Logic nghiá»‡p vá»¥), Application (Use Cases), Infrastructure (Database, API), Presentation (Web/API).
- Äáº£m báº£o tÃ­nh Ä‘á»™c láº­p giá»¯a cÃ¡c thÃ nh pháº§n â€“ táº§ng bÃªn ngoÃ i cÃ³ thá»ƒ thay Ä‘á»•i mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n lÃµi á»©ng dá»¥ng.
- Dá»… kiá»ƒm thá»­, báº£o trÃ¬, má»Ÿ rá»™ng trong dÃ i háº¡n.

MÃ´ hÃ¬nh cáº¥u trÃºc 
```
Presentation â”€â”€> Application â”€â”€> Domain <â”€â”€ Entities
                         â”‚
               Infrastructure (DB, Files, APIs)
```

Trong táº§ng **Application**, báº¡n cÃ³ ráº¥t nhiá»u Use Case nhÆ°:
- CreateUser
- UpdateOrder
- SendInvoiceEmail
- GetUserById

Má»—i Use Case lÃ  má»™t logic Ä‘á»™c láº­p, nhÆ°ng náº¿u báº¡n quáº£n lÃ½ báº±ng cÃ¡ch viáº¿t toÃ n bá»™ trong Service hoáº·c Controller thÃ¬:

- KhÃ³ quáº£n lÃ½ khi sá»‘ lÆ°á»£ng Use Case tÄƒng lÃªn.
- Dá»… vi pháº¡m nguyÃªn táº¯c SRP (Single Responsibility Principle).
- Test phá»©c táº¡p do cÃ¡c Service phá»¥ thuá»™c láº«n nhau.

**Váº­y MediatR lÃ  vá»‹ cá»©u tinh**

MediatR lÃ  má»™t thÆ° viá»‡n .NET giÃºp báº¡n triá»ƒn khai Mediator Pattern má»™t cÃ¡ch dá»… dÃ ng:

- Má»—i Use Case sáº½ lÃ  má»™t Request (vÃ­ dá»¥: CreateUserCommand) vÃ  má»™t Handler riÃªng (CreateUserCommandHandler).
- Má»i giao tiáº¿p giá»¯a Presentation vÃ  Application Ä‘á»u Ä‘i qua IMediator.Send(...).
- KhÃ´ng cÃ³ service â€œto tÆ°á»›ngâ€ ná»¯a, mÃ  má»i logic Ä‘Æ°á»£c chia nhá» vÃ  Ä‘Ã³ng gÃ³i theo má»¥c Ä‘Ã­ch.

## TÃ³m láº¡i
NhÆ° váº­y **MediatR** vÃ  **Clean Architecture** lÃ  má»™t sá»± káº¿t há»£p hoÃ n háº£o cho kiáº¿n trÃºc phÃ¡t triá»ƒn pháº§n má»m theo cÃ¡ch hiá»‡n Ä‘áº¡i. GiÃºp cho developer xÃ¢y dá»±ng á»©ng dá»¥ng rÃµ rÃ ng hÆ¡n, cÃ³ sá»± tÃ¡ch biá»‡t, dá»… dÃ ng test vÃ  dá»… dÃ ng phÃ¡t triá»ƒn, Ä‘áº·c biá»‡t lÃ  giáº£m sá»± phá»¥ thuá»™c láº«n nhau vÃ  tuÃ¢n thá»§ theo nguyÃªn lÃ½ SOLID.

# Pipeline Behaviors â€“ Xá»­ lÃ½ trung gian nÃ¢ng cao trong MediatR
## Pipeline Behaviors lÃ  gÃ¬?

Trong **MediatR**, ngoÃ i viá»‡c xá»­ lÃ½ cÃ¡c Request báº±ng cÃ¡c Handler, báº¡n cÃ²n cÃ³ thá»ƒ chÃ¨n vÃ o cÃ¡c bÆ°á»›c trung gian xá»­ lÃ½ logic chung thÃ´ng qua thá»© gá»i lÃ  Pipeline Behavior.
NÃ³i cÃ¡ch khÃ¡c:

**Pipeline Behavior = Middleware dÃ nh riÃªng cho Request/Response trong MediatR.**

NÃ³ hoáº¡t Ä‘á»™ng giá»‘ng nhÆ° **middleware trong ASP.NET Core**, nhÆ°ng chá»‰ Ã¡p dá»¥ng bÃªn trong luá»“ng xá»­ lÃ½ cá»§a MediatR.

## Váº­y táº¡i sao cáº§n Pipeline Behaviors?

Giáº£ sá»­ trong thá»±c táº¿:

- Log toÃ n bá»™ request & response
- Kiá»ƒm tra quyá»n truy cáº­p (authorization)
- Validate dá»¯ liá»‡u báº±ng **FluentValidation**
- Báº¯t thá»i gian thá»±c thi cá»§a tá»«ng handler
- Báº¯t lá»—i exception vÃ  xá»­ lÃ½ thá»‘ng nháº¥t
- ThÃªm cache cho má»™t sá»‘ truy váº¥n (query)

Báº¡n **khÃ´ng nÃªn** viáº¿t nhá»¯ng logic nÃ y trong má»—i `Handler`, vÃ¬ sáº½ **vi pháº¡m nguyÃªn táº¯c DRY** vÃ  khiáº¿n code khÃ³ báº£o trÃ¬.

Pipeline Behaviors chÃ­nh má»™t lÃ  **nÆ¡i lÃ½ tÆ°á»Ÿng** Ä‘á»ƒ báº¡n giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.

## Cáº¥u trÃºc má»™t PipelineBehavior
```
public class LoggingBehavior<TRequest, TResponse> : IPipelineBehavior<TRequest, TResponse>
{
    private readonly ILogger<LoggingBehavior<TRequest, TResponse>> _logger;

    public LoggingBehavior(ILogger<LoggingBehavior<TRequest, TResponse>> logger)
    {
        _logger = logger;
    }

    public async Task<TResponse> Handle(
        TRequest request,
        RequestHandlerDelegate<TResponse> next,
        CancellationToken cancellationToken)
    {
        _logger.LogInformation("Handling {RequestName}", typeof(TRequest).Name);
        var response = await next(); // Gá»i handler tiáº¿p theo
        _logger.LogInformation("Handled {RequestName}", typeof(TRequest).Name);
        return response;
    }
}

```

## Pipeline hoáº¡t Ä‘á»™ng ra sao?

Giáº£ sá»­ tÃ´i cÃ³ 1 tÃ­nh nÄƒng CreateUser,
ThÃ¬ khi gá»i phÆ°Æ¡ng thá»©c sau:
```
await _mediator.Send(new CreateUserCommand());
```
MediatR sáº½ lÃ m 3 viá»‡c:
- TÃ¬m cÃ¡c `IPipelineBehavior<TRequest, TResponse>` Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½.
- XÃ¢y dá»±ng chuá»—i xá»­ lÃ½ (pipeline) dá»±a theo thá»© tá»± Ä‘Äƒng kÃ½ cÃ¡c behaviors.
- Thá»±c thi tá»«ng behavior má»™t, theo thá»© tá»± lá»“ng nhau, cho tá»›i khi gá»i Ä‘áº¿n Handler.

Giáº£ sá»­ báº¡n cÃ³ 3 behaviors Ä‘Æ°á»£c Ä‘Äƒng kÃ½ theo thá»© tá»±:
```
services.AddTransient(typeof(IPipelineBehavior<,>), typeof(LoggingBehavior<,>));
services.AddTransient(typeof(IPipelineBehavior<,>), typeof(ValidationBehavior<,>));
services.AddTransient(typeof(IPipelineBehavior<,>), typeof(PerformanceBehavior<,>));
```

Khi Ä‘Ã³ pipeline sáº½ hoáº¡t Ä‘á»™ng nhÆ° sau:
```
LoggingBehavior
â””â”€â”€ ValidationBehavior
    â””â”€â”€ PerformanceBehavior
        â””â”€â”€ CreateUserCommandHandler
```

# Cáº¥u trÃºc thÆ° má»¥c dá»± Ã¡n

NhÆ° váº­y, sau khi Ä‘Ã£ tÃ¬m hiá»ƒu ká»¹ vá» MediatR thÃ¬ hÃ£y xem láº¡i háº§u nhÆ° cÃ¡c dá»± Ã¡n cÅ© sáº½ cÃ³ cáº¥u trÃºc thÆ° má»¥c dá»± Ã¡n nhÆ° sau: 

```
Project
 â”£ ğŸ“‚Controllers
 â”ƒ â”— ğŸ“„UserController.cs
 â”£ ğŸ“‚Services
 â”ƒ â”— ğŸ“„UserService.cs
 â”£ ğŸ“‚Repositories
 â”ƒ â”— ğŸ“„UserRepository.cs
 â”£ ğŸ“‚Models
 â”ƒ â”— ğŸ“„User.cs
 â”£ ğŸ“‚DTOs
 â”ƒ â”— ğŸ“„UserDto.cs
 â”£ ğŸ“‚ViewModels
 â”ƒ â”— ğŸ“„CreateUserViewModel.cs
 â”— ğŸ“„Program.cs
```

Nhá»¯ng háº¡n cháº¿:
- Controller gá»i trá»±c tiáº¿p Service, Service gá»i Repository.
- KhÃ³ kiá»ƒm soÃ¡t luá»“ng nghiá»‡p vá»¥ phá»©c táº¡p.
- KhÃ³ má»Ÿ rá»™ng hoáº·c thÃªm xá»­ lÃ½ trung gian nhÆ° logging, validation, v.v.
- Má»—i tÃ­nh nÄƒng bá»‹ phÃ¢n tÃ¡n ra nhiá»u folder â€“ khÃ³ theo dÃµi end-to-end.

**Sau khi Ã¡p dá»¥ng MediatR + Clean Architecture (Feature-Based)**
```
Project
 â”£ ğŸ“‚Features
 â”ƒ â”— ğŸ“‚Users
 â”ƒ   â”£ ğŸ“‚Commands
 â”ƒ   â”ƒ â”— ğŸ“‚CreateUser
 â”ƒ   â”ƒ   â”£ ğŸ“„CreateUserCommand.cs
 â”ƒ   â”ƒ   â”£ ğŸ“„CreateUserCommandHandler.cs
 â”ƒ   â”ƒ   â”£ ğŸ“„CreateUserValidator.cs
 â”ƒ   â”£ ğŸ“‚Queries
 â”ƒ   â”ƒ â”— ğŸ“‚GetUserById
 â”ƒ   â”ƒ   â”£ ğŸ“„GetUserByIdQuery.cs
 â”ƒ   â”ƒ   â”£ ğŸ“„GetUserByIdQueryHandler.cs
 â”ƒ   â”£ ğŸ“‚Dtos
 â”ƒ   â”ƒ â”— ğŸ“„UserDto.cs
 â”ƒ   â”£ ğŸ“‚Events
 â”ƒ   â”ƒ â”£ ğŸ“„UserCreatedEvent.cs
 â”ƒ   â”ƒ â”— ğŸ“„UserCreatedEventHandler.cs
 â”ƒ   â”£ ğŸ“‚Notifications
 â”ƒ   â”ƒ â”£ ğŸ“„SendWelcomeEmailNotification.cs
 â”ƒ   â”ƒ â”— ğŸ“„SendWelcomeEmailHandler.cs
 â”ƒ   â”— ğŸ“‚Authorization
 â”ƒ       â”— ğŸ“„CreateUserAuthorizationHandler.cs
 â”£ ğŸ“‚Shared
 â”ƒ â”£ ğŸ“‚Behaviors
 â”ƒ â”ƒ â”£ ğŸ“„LoggingBehavior.cs
 â”ƒ â”ƒ â”£ ğŸ“„ValidationBehavior.cs
 â”ƒ â”ƒ â”£ ğŸ“„PerformanceBehavior.cs
 â”ƒ â”ƒ â”£ ğŸ“„AuthorizationBehavior.cs
 â”ƒ â”ƒ â”— ğŸ“„CachingBehavior.cs
 â”£ ğŸ“‚Infrastructure
 â”ƒ â”— ğŸ“‚Persistence
 â”ƒ     â”— ğŸ“„UserRepository.cs
 â”£ ğŸ“‚Controllers
 â”ƒ â”— ğŸ“„UserController.cs
 â”— ğŸ“„Program.cs
```

HÃ£y cÃ¹ng Ä‘iá»ƒm qua nhá»¯ng Ä‘iá»ƒm ná»•i báº­t sau khi Ã¡p dá»¥ng
| Æ¯u Ä‘iá»ƒm                        | MÃ´ táº£                                                                              |
| ------------------------------ | ---------------------------------------------------------------------------------- |
| **Feature-Based**           | Má»—i tÃ­nh nÄƒng nhÆ° "User" cÃ³ thÆ° má»¥c riÃªng, dá»… tÃ¬m vÃ  má»Ÿ rá»™ng.                      |
| **CQRS rÃµ rÃ ng**            | Commands = Ghi (write), Queries = Äá»c (read) Ä‘Æ°á»£c phÃ¢n chia ráº¡ch rÃ²i.              |
| **Plug-and-play behaviors** | Logging, Validation, Exception, Performance cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng trÃªn toÃ n há»‡ thá»‘ng. |
| **Dá»… test**                 | CÃ¡c handler riÃªng biá»‡t, dá»… viáº¿t unit test tá»«ng command/query.                      |
| **Controller má»ng nháº¹**     | Chá»‰ cÃ²n nhiá»‡m vá»¥ nháº­n request, gá»i `_mediator.Send(...)`.                          |
| **Má»Ÿ rá»™ng dá»… dÃ ng**         | Chá»‰ cáº§n thÃªm Command/Query má»›i mÃ  khÃ´ng áº£nh hÆ°á»Ÿng kiáº¿n trÃºc chung.                 |


## Vai trÃ² cÃ¡c Folder
### 1. Features
Folder chÃ­nh Ä‘á»ƒ tá»• chá»©c theo tá»«ng tÃ­nh nÄƒng (feature) cá»§a á»©ng dá»¥ng. Má»—i tÃ­nh nÄƒng chá»©a cÃ¡c pháº§n nhá» nhÆ° command, query, event, notification, authorization riÃªng biá»‡t.

- **Commands**: Chá»©a cÃ¡c lá»‡nh (command) cho cÃ¡c thao tÃ¡c thay Ä‘á»•i dá»¯ liá»‡u (Create, Update, Delete).
- **Queries**: Chá»©a cÃ¡c truy váº¥n (query) Ä‘á»ƒ láº¥y dá»¯ liá»‡u, khÃ´ng gÃ¢y thay Ä‘á»•i tráº¡ng thÃ¡i há»‡ thá»‘ng.
- **Dtos**: CÃ¡c Data Transfer Object dÃ¹ng Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u giá»¯a cÃ¡c lá»›p, giÃºp tÃ¡ch biá»‡t vá»›i Entity.
- **Events**: LÆ°u cÃ¡c sá»± kiá»‡n nghiá»‡p vá»¥ (domain events) nhÆ° UserCreatedEvent Ä‘á»ƒ pháº£n á»©ng sau khi má»™t hÃ nh Ä‘á»™ng xáº£y ra.
- **Notifications**: ThÃ´ng bÃ¡o, gá»­i tÃ­n hiá»‡u (notification) cho cÃ¡c pháº§n khÃ¡c trong há»‡ thá»‘ng (email, message, push notification).
- **Authorization**: Xá»­ lÃ½ á»§y quyá»n, kiá»ƒm tra quyá»n háº¡n trÆ°á»›c khi thá»±c thi command hoáº·c query.

### 2. Shared
Chá»©a cÃ¡c thÃ nh pháº§n dÃ¹ng chung toÃ n bá»™ á»©ng dá»¥ng, Ä‘áº·c biá»‡t lÃ  cÃ¡c pipeline behaviors (xá»­ lÃ½ trung gian) cá»§a MediatR.

Behaviors:
ÄÃ¢y lÃ  cÃ¡c lá»›p xá»­ lÃ½ middleware theo kiá»ƒu pipeline, cháº¡y xen káº½ trÆ°á»›c vÃ  sau khi Handler xá»­ lÃ½ request.
VÃ­ dá»¥:

- **LoggingBehavior**: Ghi log cÃ¡c request vÃ  response.
- **ValidationBehavior**: Kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a request trÆ°á»›c khi xá»­ lÃ½.
- **PerformanceBehavior**: Äo thá»i gian xá»­ lÃ½ request.
- **AuthorizationBehavior**: Kiá»ƒm tra quyá»n truy cáº­p cho request.
- **CachingBehavior**: LÆ°u cache káº¿t quáº£ query Ä‘á»ƒ tÄƒng hiá»‡u suáº¥t.

### 3. Infrastructure
Lá»›p bÃªn ngoÃ i xá»­ lÃ½ cÃ¡c cÃ´ng viá»‡c liÃªn quan Ä‘áº¿n ká»¹ thuáº­t hoáº·c tÆ°Æ¡ng tÃ¡c vá»›i tháº¿ giá»›i bÃªn ngoÃ i.

Persistence:
ThÆ° má»¥c chá»©a cÃ¡c lá»›p Repository, DbContext, hoáº·c cÃ¡c ká»¹ thuáº­t lÆ°u trá»¯ khÃ¡c (Entity Framework, Dapper, v.v).
ÄÃ¢y lÃ  nÆ¡i tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i database, Ä‘Æ°á»£c gá»i tá»« handler hoáº·c service.

### 4. Controllers
CÃ¡c lá»›p Controller trong ASP.NET Core chá»‹u trÃ¡ch nhiá»‡m nháº­n HTTP request vÃ  chuyá»ƒn tiáº¿p request Ä‘Ã³ tá»›i MediatR báº±ng _mediator.Send(...).

Controller nÃªn Ä‘Æ°á»£c giá»¯ má»ng nháº¹, khÃ´ng chá»©a logic nghiá»‡p vá»¥ mÃ  chá»‰ lÃ m nhiá»‡m vá»¥ chuyá»ƒn tiáº¿p.

# Tá»•ng káº¿t 
MediatR khÃ´ng chá»‰ Ä‘Æ¡n thuáº§n lÃ  má»™t thÆ° viá»‡n há»— trá»£ pattern **Mediator** trong .NET, mÃ  cÃ²n lÃ  cÃ´ng cá»¥ Ä‘áº¯c lá»±c giÃºp báº¡n xÃ¢y dá»±ng á»©ng dá»¥ng theo **Clean Architecture** â€“ tÃ¡ch báº¡ch rÃµ rÃ ng cÃ¡c trÃ¡ch nhiá»‡m, nÃ¢ng cao tÃ­nh má»Ÿ rá»™ng vÃ  báº£o trÃ¬.

Viá»‡c Ã¡p dá»¥ng MediatR kÃ¨m theo cÃ¡c folder chuyÃªn biá»‡t nhÆ° `Events`, `Notifications`, `Authorization`, `Behaviors`â€¦ cho phÃ©p báº¡n tá»• chá»©c mÃ£ nguá»“n theo hÆ°á»›ng **modular**, dá»… dÃ ng quáº£n lÃ½, kiá»ƒm thá»­ vÃ  phÃ¡t triá»ƒn.

Äáº·c biá»‡t, **Pipeline Behaviors** giÃºp báº¡n xá»­ lÃ½ cÃ¡c logic cross-cutting concern nhÆ° **validation**, **authorization**, **logging**, vÃ  **caching** má»™t cÃ¡ch táº­p trung, trÃ¡nh láº·p láº¡i vÃ  tÄƒng tÃ­nh nháº¥t quÃ¡n trong toÃ n bá»™ á»©ng dá»¥ng.

Báº¡n sáº½ cáº£m nháº­n Ä‘Æ°á»£c sá»± linh hoáº¡t khi xÃ¢y dá»±ng cÃ¡c tÃ­nh nÄƒng má»›i hoáº·c thay Ä‘á»•i yÃªu cáº§u kinh doanh mÃ  khÃ´ng lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n pháº§n cÃ²n láº¡i cá»§a há»‡ thá»‘ng. ÄÃ¢y chÃ­nh lÃ  chÃ¬a khÃ³a Ä‘á»ƒ phÃ¡t triá»ƒn pháº§n má»m bá»n vá»¯ng, chuyÃªn nghiá»‡p trong mÃ´i trÆ°á»ng dá»± Ã¡n lá»›n vÃ  phá»©c táº¡p.

Náº¿u báº¡n chÆ°a báº¯t Ä‘áº§u sá»­ dá»¥ng MediatR, hÃ£y thá»­ ngay hÃ´m nay Ä‘á»ƒ tráº£i nghiá»‡m sá»± khÃ¡c biá»‡t trong viá»‡c tá»• chá»©c code vÃ  tá»‘i Æ°u quy trÃ¬nh phÃ¡t triá»ƒn .NET cá»§a mÃ¬nh!